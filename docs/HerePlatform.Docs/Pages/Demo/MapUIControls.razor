@page "/demo/map-ui-controls"

<PageTitle>UI Controls</PageTitle>

<h3>UI Controls Demo</h3>
<p>Distance measurement, overview map, and zoom rectangle controls.</p>

<details class="mb-3">
    <summary class="fw-bold" role="button">Usage</summary>
    <pre class="bg-light border rounded p-3 mt-2 mb-0"><code>@@using HerePlatformComponents.Maps.UI

&lt;AdvancedHereMap Options="@@_mapOptions" Height="500px"&gt;

    &lt;!-- Click to measure distance between points --&gt;
    &lt;DistanceMeasurementComponent
        Active="true"
        Alignment="UIAlignment.TopRight" /&gt;

    &lt;!-- Mini overview map in the corner --&gt;
    &lt;OverviewMapComponent
        Alignment="UIAlignment.BottomRight"
        ZoomDelta="@@_overviewZoomDelta" /&gt;

    &lt;!-- Draw a rectangle to zoom into an area --&gt;
    &lt;ZoomRectangleComponent
        Active="true"
        Alignment="UIAlignment.TopLeft" /&gt;

&lt;/AdvancedHereMap&gt;

@@code {
    private int _overviewZoomDelta = 4;

    private MapOptions _mapOptions = new()
    {
        Center = new LatLngLiteral(52.52, 13.405),
        Zoom = 13,
        EnableUI = true,
        EnableInteraction = true
    };
}</code></pre>
</details>

<AdvancedHereMap @ref="_advMap" Options="@_mapOptions" Height="clamp(250px, 50vh, 500px)">

    @if (_showDistanceMeasurement)
    {
        <DistanceMeasurementComponent Active="true" Alignment="UIAlignment.TopRight" />
    }

    @if (_showOverview)
    {
        <OverviewMapComponent Alignment="UIAlignment.BottomRight" ZoomDelta="@_overviewZoomDelta" />
    }

    @if (_showZoomRect)
    {
        <ZoomRectangleComponent Active="true" Alignment="UIAlignment.TopLeft" />
    }

</AdvancedHereMap>

<div class="mt-3 d-flex gap-3 flex-wrap">
    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" @bind="_showDistanceMeasurement" />
        <label class="form-check-label">Distance Measurement</label>
    </div>

    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" @bind="_showOverview" />
        <label class="form-check-label">Overview Map</label>
    </div>

    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" @bind="_showZoomRect" />
        <label class="form-check-label">Zoom Rectangle</label>
    </div>

    @if (_showOverview)
    {
        <div>
            <label>Overview Zoom Delta: @_overviewZoomDelta</label>
            <input type="range" class="form-range" min="2" max="8" step="1"
                @bind="_overviewZoomDelta" @bind:event="oninput" style="max-width:150px;" />
        </div>
    }
</div>

@code {
    private AdvancedHereMap? _advMap;
    private bool _showDistanceMeasurement;
    private bool _showOverview;
    private bool _showZoomRect;
    private int _overviewZoomDelta = 4;

    private MapOptions _mapOptions = new()
    {
        Center = new LatLngLiteral(52.52, 13.405),
        Zoom = 13,
        EnableUI = true,
        EnableInteraction = true
    };
}
