@page "/rest-api/getting-started"

<PageTitle>Getting Started â€” HerePlatform.NET Docs</PageTitle>

<div class="doc-content">
    <h1>Getting Started</h1>

    <h2>Installation</h2>
    <CodeBlock Language="bash" Code="dotnet add package BlazorHerePlatform.RestClient" />

    <h2>Register Services</h2>
    <p>Register all 9 HERE REST API services with a single call:</p>
    <CodeBlock Language="csharp" Code="@_registrationCode" />

    <h2>Authentication Methods</h2>
    <p>Exactly one authentication method must be configured:</p>

    <h3>API Key (simplest)</h3>
    <CodeBlock Language="csharp" Code="@_apiKeyCode" />

    <h3>OAuth 2.0 (server-to-server)</h3>
    <CodeBlock Language="csharp" Code="@_oauthCode" />

    <h3>External Token Provider</h3>
    <CodeBlock Language="csharp" Code="@_tokenProviderCode" />

    <h2>Usage Example</h2>
    <CodeBlock Language="csharp" Code="@_usageCode" />

    <h2>Available Services</h2>
    <div class="table-responsive">
        <table class="table table-sm table-bordered">
            <thead class="table-light">
                <tr>
                    <th>Interface</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><code>IGeocodingService</code></td><td>Forward and reverse geocoding</td></tr>
                <tr><td><code>IRoutingService</code></td><td>Route calculation (car, truck, pedestrian, bicycle, scooter, EV)</td></tr>
                <tr><td><code>IPlacesService</code></td><td>Discover, browse, and lookup places</td></tr>
                <tr><td><code>IIsolineService</code></td><td>Isochrone and isodistance calculation</td></tr>
                <tr><td><code>IMatrixRoutingService</code></td><td>Travel time/distance matrices</td></tr>
                <tr><td><code>ITrafficService</code></td><td>Traffic incidents and flow data</td></tr>
                <tr><td><code>IPublicTransitService</code></td><td>Transit departures and station search</td></tr>
                <tr><td><code>IWaypointSequenceService</code></td><td>Waypoint order optimization</td></tr>
                <tr><td><code>IGeofencingService</code></td><td>Client-side geofence checks (no HTTP)</td></tr>
            </tbody>
        </table>
    </div>
</div>

@code {
    private const string _registrationCode = @"// Program.cs or Startup.cs
builder.Services.AddHereRestServices(options =>
{
    options.ApiKey = ""YOUR_API_KEY"";
});";

    private const string _apiKeyCode = @"options.ApiKey = ""YOUR_API_KEY"";
// Appended as ?apiKey=... query parameter";

    private const string _oauthCode = @"options.AccessKeyId = ""YOUR_ACCESS_KEY_ID"";
options.AccessKeySecret = ""YOUR_ACCESS_KEY_SECRET"";
// Uses HMAC-SHA256 signed OAuth 2.0 tokens";

    private const string _tokenProviderCode = @"options.TokenProvider = async cancellationToken =>
{
    // Return a Bearer token from your identity provider
    return await GetTokenFromMyIdP(cancellationToken);
};";

    private const string _usageCode = @"// Inject any service via DI
public class MyComponent
{
    private readonly IGeocodingService _geocoding;

    public MyComponent(IGeocodingService geocoding)
    {
        _geocoding = geocoding;
    }

    public async Task SearchAsync()
    {
        var result = await _geocoding.GeocodeAsync(""Invalidenstr. 116, Berlin"");
        foreach (var item in result.Items!)
        {
            Console.WriteLine($""{item.Title}: {item.Position}"");
        }
    }
}";
}
